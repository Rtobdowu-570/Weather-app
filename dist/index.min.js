"use strict";var cityInput=document.querySelector("#cityInput"),searchButton=document.querySelector("#searchButton");function getCityCoordinates(e,n){var t=new XMLHttpRequest,o="https://geocoding-api.open-meteo.com/v1/search?name=".concat(encodeURIComponent(e),"&count=1");t.open("GET",o,!0),t.onload=function(){if(200===this.status){var e=JSON.parse(this.responseText);if(e.results&&0<e.results.length){var t=e.results[0];n(null,{name:t.name,country:t.country,latitude:t.latitude,longitude:t.longitude})}else n("City not found",null)}else n("Error: "+this.status,null)},t.onerror=function(){n("Network error",null)},t.send()}function getWeather(e,t,n){var o=new XMLHttpRequest,r="https://api.open-meteo.com/v1/forecast?latitude=".concat(e,"&longitude=").concat(t,"&current_weather=true");o.open("GET",r,!0),o.onload=function(){if(200===this.status){var e;try{e=JSON.parse(this.responseText)}catch(e){return void n("Invalid JSON from weather API",null)}e&&e.current_weather?n(null,e.current_weather):n("No current_weather in response",null)}else n("Error: "+this.status,null)},o.onerror=function(){n("Network error",null)},o.send()}function search(){getCityCoordinates(cityInput.value.trim(),function(e,u){if(e)return console.error(e),void(document.querySelector(".city-name").textContent="Error: "+e);console.log("Found:",u.name,u.country),getWeather(u.latitude,u.longitude,function(e,t){if(e)return console.error(e),void(document.querySelector(".city-name").textContent="Error: "+e);console.log("Weather Data:",t);var n=document.querySelector(".city-name"),o=document.querySelector(".temperature"),r=document.querySelector(".description"),c=document.querySelector(".wind");n&&(n.textContent="".concat(u.name,", ").concat(u.country)),o&&(o.textContent=t&&void 0!==t.temperature?"".concat(t.temperature,"Â°C"):"--"),r&&(r.textContent=t&&void 0!==t.weathercode?"Weather Code: ".concat(t.weathercode):""),c&&(c.textContent=t&&void 0!==t.windspeed?"Wind Speed: ".concat(t.windspeed," km/h"):"")})}),cityInput.value=""}cityInput&&searchButton?(cityInput.addEventListener("keydown",function(e){"Enter"===e.key&&search()}),searchButton.addEventListener("click",search)):console.error("Required DOM elements not found: #cityInput or #searchButton");
//# sourceMappingURL=index.min.js.map
